@* Mobile-first responsive Plugins Admin Tab *@

<div class="space-y-6 md:space-y-8">

    @* Header with Add Button *@
    <div class="flex items-center justify-between">
        <div>
            <h3 class="text-base md:text-lg font-semibold text-white">Available Plugins</h3>
            <p class="text-sm text-gray-400 mt-1">Manage available tools and plugins for the AI assistant</p>
        </div>
        <button @onclick="HandleAddPlugin"
                class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-all flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            <span class="hidden sm:inline">Add Plugin</span>
        </button>
    </div>

    @* Plugin List *@
    <div class="space-y-4">
        @foreach (var plugin in plugins)
        {
            <div @key="plugin.Id" class="bg-[#0F0F0F] border border-[#2A2A2A] rounded-lg p-4 hover:border-[#3A3A3A] transition-colors">
                <div class="flex items-start justify-between gap-4">
                    <div class="flex items-start gap-3 flex-1">
                        <div class="w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center flex-shrink-0">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                @((MarkupString)plugin.Icon)
                            </svg>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2">
                                <h4 class="text-sm font-semibold text-white">@plugin.Name</h4>
                            </div>
                            <p class="text-xs text-gray-400 mt-1">@plugin.Description</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-2 flex-shrink-0">
                        @* Settings Button *@
                        <button @onclick="@(() => HandleEditPlugin(plugin))"
                                class="p-2 text-gray-400 hover:text-white hover:bg-[#2A2A2A] rounded-lg transition-all">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                            </svg>
                        </button>

                        @* Toggle *@
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" @bind="plugin.Enabled" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                        </label>
                    </div>
                </div>
            </div>
        }
    </div>

</div>

@code {
    private List<PluginInfo> plugins = new()
    {
        new PluginInfo
        {
            Id = "web-search",
            Name = "Web Search",
            Description = "Search the web for real-time information",
            Icon = "<circle cx=\"11\" cy=\"11\" r=\"8\"/><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"/>",
            Enabled = false
        },
        new PluginInfo
        {
            Id = "code-interpreter",
            Name = "Code Interpreter",
            Description = "Execute Python code and analyze data",
            Icon = "<polyline points=\"16 18 22 12 16 6\"/><polyline points=\"8 6 2 12 8 18\"/>",
            Enabled = true
        },
        new PluginInfo
        {
            Id = "file-management",
            Name = "Supreme File Management",
            Description = "Advanced file operations and management",
            Icon = "<path d=\"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z\"/><polyline points=\"13 2 13 9 20 9\"/>",
            Enabled = false
        },
        new PluginInfo
        {
            Id = "weather",
            Name = "Weather Forecast",
            Description = "Get weather forecasts and conditions",
            Icon = "<path d=\"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z\"/>",
            Enabled = false
        },
        new PluginInfo
        {
            Id = "mcp",
            Name = "EchoMCP",
            Description = "Model Context Protocol integration",
            Icon = "<path d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"/><polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"/><line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"/>",
            Enabled = true
        }
    };

    private void HandleAddPlugin()
    {
        // TODO: Implement add plugin dialog
    }

    private void HandleEditPlugin(PluginInfo plugin)
    {
        // TODO: Implement edit plugin dialog with parameters
    }

    public class PluginInfo
    {
        public string Id { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string Icon { get; set; } = string.Empty;
        public bool Enabled { get; set; }
    }
}
