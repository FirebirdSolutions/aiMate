@page "/"
@rendermode InteractiveServer

<PageTitle>aiMate - Your AI Mate</PageTitle>

<div class="chat-messages">
    <div class="chat-message">
        <div class="chat-message-avatar assistant">AI</div>
        <div class="chat-message-content">
            <div class="chat-message-header">
                <span class="chat-message-role">aiMate</span>
                <span class="chat-message-time">Just now</span>
            </div>
            <div class="chat-message-body">
                <p>Kia ora! I'm aiMate, your AI mate from New Zealand. ðŸ‡³ðŸ‡¿</p>
                <p>Free, open-source, and built for people - not corporates. What can I help you with today, mate?</p>
            </div>
        </div>
    </div>
</div>

<div class="chat-input-container">
    <div class="chat-input-wrapper">
        <button class="btn btn-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px;">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
            </svg>
        </button>

        <textarea
            class="chat-input"
            placeholder="Send a Message"
            rows="1"
            @bind="@_inputText"
            @onkeydown="@HandleKeyDown"></textarea>

        <button class="btn btn-primary" @onclick="SendMessage">
            <svg viewBox="0 0 24 24" fill="currentColor" style="width: 16px; height: 16px;">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </button>
    </div>
</div>

@code {
    private string _inputText = "";

    private async Task SendMessage()
    {
        if (string.IsNullOrWhiteSpace(_inputText))
            return;

        // TODO: Implement actual message sending with Fluxor state management
        Console.WriteLine($"Sending message: {_inputText}");
        _inputText = "";
    }

    private async Task HandleKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter" && !e.ShiftKey)
        {
            await SendMessage();
        }
    }
}
